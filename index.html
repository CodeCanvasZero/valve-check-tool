哭<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDSHT阀体检测</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 用户登录模态框 -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>👤 用户登录</h2>
            <p>请输入您的姓名开始使用</p>
            <input type="text" id="usernameInput" placeholder="请输入姓名" maxlength="20" autofocus>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="login()">登录</button>
            </div>
            <div class="recent-users">
                <p>最近使用的用户：</p>
                <div id="recentUsersList"></div>
            </div>
        </div>
    </div>

    <!-- 用户切换模态框 -->
    <div id="switchUserModal" class="modal">
        <div class="modal-content">
            <h2>👥 切换用户</h2>
            <div id="usersList"></div>
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeSwitchUserModal()">取消</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- 用户信息栏 - 紧凑版 -->
        <div class="user-bar">
            <div class="user-info">
                <span class="user-icon" id="userIcon" onclick="toggleUsernameDisplay()" title="点击切换用户名显示">👤</span>
                <span class="user-name" id="currentUserName">加载中...</span>
                <span class="user-stats" id="userStats">今日：0次 | 总计：0次</span>
            </div>
            <div class="user-actions">
                <button class="btn-small" onclick="openSwitchUserModal()">切换</button>
                <button class="btn-small btn-logout" onclick="logout()">退出</button>
            </div>
        </div>

        <h1>KDSHT阀体检测</h1>
        <div class="subtitle">输入零件号，自动检测是否需要打孔</div>
        
        <div class="info-row">
            <div class="info-label">客户名称</div>
            <div class="info-value">KDSHT</div>
        </div>
        <div class="info-row">
            <div class="info-label">客户代码</div>
            <div class="info-value">NL3749</div>
        </div>
        <div class="info-row">
            <div class="info-label">产品名称</div>
            <div class="info-value">阀体</div>
        </div>
        
        <div class="input-group">
            <label for="partNumber">零件号*</label>
            <input type="text" id="partNumber" placeholder="请输入准确零件号" autofocus>
            <span class="search-icon" onclick="check()">🔍</span>
        </div>
        
        <div class="button-group">
            <button class="btn-primary" onclick="check()">🔍 检测</button>
            <button class="btn-secondary" onclick="reset()">🔄 重新检测</button>
        </div>
        
        <div id="result" class="result"></div>
        
        <div class="footer">
            <p><strong>阀体检测工具</strong></p>
            <p>版本：v1.6.0 | 作者：锦鲤附体 </p>
            <p id="systemStatus" style="font-size: 11px; color: #999;">
                <!-- 系统状态会在这里显示 -->
            </p>
            <p>
                📊 总使用次数：<span id="totalCount">加载中...</span> 次 | 
                💻 你的使用：<span id="localCount">0</span> 次
            </p>
            <p>
                <button id="refreshBtn" onclick="refreshTotalCount()" style="padding: 5px 10px; font-size: 12px; background: #6c757d; color: white; border: none; border-radius: 3px; cursor: pointer; margin: 5px;">
                    🔄 刷新总次数
                </button>
                <button id="secretStatsBtn" style="padding: 5px 10px; font-size: 12px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; margin: 5px;">
                    📈 查看详细统计
                </button>
            </p>
            <p> 技术支持：</p>
            <p>© 2025 . All rights reserved.</p>
        </div>
    </div>

    <!-- 按顺序加载：先系统配置，再业务数据，最后逻辑 -->
    <script src="data/settings.js"></script>
    <script src="data/config.js"></script>
    <script src="js/script.js"></script>
</body>
</html>